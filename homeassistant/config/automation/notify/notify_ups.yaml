###
# UPS notifications
###

- alias: "Notify for power outage and restore"
  id: 151f5012-4ee2-4372-926c-81746b3e7f76
  trigger:
    - platform: state
      entity_id: sensor.ups_status
      from: 'Online'
      to: 'On Battery'
    - platform: state
      entity_id: sensor.ups_status
      from: 'On Battery'
      to: 'Online'
  action:
    - choose:
      - conditions: "{{ is_state('sensor.sensor.ups_status', 'On Battery') }}"
        sequence:
          - service: notify.family
            data:
              message: "EMERGENCY POWER ONLY"
      - conditions: "{{ is_state('sensor.sensor.ups_status', 'Online') }}"
        sequence:
          - service: notify.family
            data:
              message: "POWER RESTORED, ALL SYSTEMS ONLINE"
